<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Toán 10</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { padding: 20px; background: #fff; }
        #debug-box {
            background: #2d2d2d; color: #76ff03; 
            padding: 20px; font-family: monospace; 
            white-space: pre-wrap; border-radius: 10px;
            margin-top: 20px; border: 2px solid red;
        }
    </style>
</head>
<body>
    <h3 class="text-center text-danger">CHẾ ĐỘ SỬA LỖI (DEBUG MODE)</h3>
    <p class="text-center">Hãy chụp ảnh màn hình phần chữ xanh bên dưới gửi cho mình nhé:</p>
    
    <div id="loading">Đang đọc file...</div>
    <div id="debug-box" style="display:none"></div>
    <div id="quiz-preview"></div>

<script>
    const FILE_MD = 'ketqua.md';

    async function debugQuiz() {
        const debugBox = document.getElementById('debug-box');
        try {
            const res = await fetch(FILE_MD);
            if (!res.ok) throw new Error("Không đọc được file (404)");
            
            const text = await res.text();
            
            // 1. HIỆN NGUYÊN HÌNH FILE MD ĐỂ KIỂM TRA
            debugBox.style.display = 'block';
            debugBox.textContent = "--- NỘI DUNG FILE CỦA BẠN (500 ký tự đầu) ---\n\n" + text.substring(0, 1000) + "\n\n... (còn tiếp)";

            // 2. THỬ TÁCH CÂU HỎI (TEST)
            // Thử tìm xem dòng nào chứa "Câu" hoặc số "1."
            const testMatch = text.match(/(?:^|\n)(.*?(?:Câu|Bài|1\.).*?)(?:\n|$)/);
            if(testMatch) {
                debugBox.textContent += "\n\n--- PHÁT HIỆN CẤU TRÚC ---\nDòng nghi vấn là câu hỏi:\n" + testMatch[1];
            } else {
                debugBox.textContent += "\n\n--- CẢNH BÁO ---\nKhông tìm thấy dấu hiệu 'Câu' hay 'Bài' hay số '1.' ở đầu dòng.";
            }

        } catch (err) {
            debugBox.style.display = 'block';
            debugBox.textContent = "LỖI: " + err.message;
        }
    }
    debugQuiz();
</script>
</body>
</html>
